<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Message File</title>
</head>
<body>
    <h1>Edit Message</h1>
    <form id="edit-form">
        <textarea id="new-message" rows="4" cols="50" placeholder="Enter your new message here"></textarea><br>
        <button type="submit">Update Message</button>
    </form>
    <div id="status"></div>
    <script>
        document.getElementById('edit-form').addEventListener('submit', function(event) {
            event.preventDefault();
            const newMessage = document.getElementById('new-message').value;
            // Replace with your own GitHub username, repo, and branch
            const username = 'your-username';
            const repo = 'your-repository';
            const path = 'message.txt';
            const branch = 'main';

            const token = 'YOUR_PERSONAL_ACCESS_TOKEN'; // Replace with your actual token

            const apiUrl = `https://api.github.com/repos/${username}/${repo}/contents/${path}`;
            const headers = {
                'Authorization': `token ${token}`,
                'Accept': 'application/vnd.github.v3+json'
            };

            // Get the current file's SHA
            fetch(apiUrl, { headers })
                .then(response => response.json())
                .then(data => {
                    const sha = data.sha;
                    const content = btoa(unescape(encodeURIComponent(newMessage))); // Encode to base64

                    const body = {
                        message: 'Update message.txt',
                        content: content,
                        sha: sha,
                        branch: branch
                    };

                    // Update the file
                    fetch(apiUrl, {
                        method: 'PUT',
                        headers: headers,
                        body: JSON.stringify(body)
                    })
                    .then(response => response.json())
                    .then(data => {
                        document.getElementById('status').innerText = 'Message updated successfully!';
                    })
                    .catch(error => {
                        document.getElementById('status').innerText = 'Error updating message: ' + error;
                    });
                })
                .catch(error => {
                    document.getElementById('status').innerText = 'Error fetching file SHA: ' + error;
                });
        });
    </script>
</body>
</html>
